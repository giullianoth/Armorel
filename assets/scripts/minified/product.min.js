import{fadeIn as e,fadeOut as a}from"./effects.min.js";import{getElement as t,getElements as n,isVisible as s}from"./variables.min.js";let photos=n(".j_product_photo"),photosWrapper=t(".j_product_photo_wrapper"),featuredWrapper=t(".j_product_featured_photo"),wrapperDimension=featuredWrapper.offsetWidth,imageZoom=()=>t(".j_zoom"),thumbs=n(".j_thumb"),expandButton=t(".j_photo_expand"),expandArea=t(".j_photo_expand_area"),expandClose=t(".close",expandArea),expandNav=n(".j_nav",expandArea),expandedPhoto=()=>t(".j_expanded_photo"),expandActions=t(".actions",expandArea),currentExpandedPhoto=t(".current-photo",expandArea),photosToExpand=t(".photos-qt",expandArea),changeExpanded=t(".image",expandArea),featured=photos[0],installments=t(".j_installment_modal"),installmentsButton=t(".j_installment_button"),installmentClose=t(".j_installment_close"),zoomElement=()=>{let e=document.createElement("div");return e.className="image-zoom j_zoom",e.style.backgroundImage=`url(${featured.src})`,e};featuredWrapper.addEventListener("mouseenter",()=>{if(!s(expandArea)){let a=zoomElement();featuredWrapper.append(a),e(a)}}),featuredWrapper.addEventListener("mousemove",a=>{if(!s(expandArea)){if(!imageZoom()){let t=zoomElement();featuredWrapper.append(t),e(t)}imageZoom().style.backgroundPositionX=`${-a.offsetX/2}px`,imageZoom().style.backgroundPositionY=`${-a.offsetY/2}px`}}),featuredWrapper.addEventListener("mouseleave",()=>{imageZoom()&&a(imageZoom(),!0)}),thumbs.forEach((e,a,t)=>{e.addEventListener("click",()=>{t.forEach(e=>e.classList.remove("active")),e.classList.add("active"),photosWrapper.style.transform=`translateX(${-wrapperDimension*a}px)`,featured=photos[a]})}),expandButton.addEventListener("click",()=>{if(!s(expandArea)){e(expandArea,"flex");let t=featured.cloneNode(!0);t.classList.add("j_expanded_photo"),changeExpanded.append(t),photosToExpand.innerText=photos.length,currentExpandedPhoto.innerText=photos.indexOf(featured)+1,expandActions.classList.contains("visible")||(window.clearTimeout(),expandActions.classList.add("visible"),setTimeout(()=>expandActions.classList.remove("visible"),3e3)),imageZoom()&&a(imageZoom(),!0)}}),expandNav.forEach(e=>{e.addEventListener("click",()=>{expandActions.classList.contains("visible")||(window.clearTimeout(),expandActions.classList.add("visible"),setTimeout(()=>expandActions.classList.remove("visible"),3e3));let a=0,t=photos.map(e=>e.outerHTML),n=expandedPhoto().cloneNode(!0),s=null;n.classList.remove("j_expanded_photo"),e.classList.contains("prev")&&(a=t.indexOf(n.outerHTML)-1<0?t.length-1:t.indexOf(n.outerHTML)-1),e.classList.contains("next")&&(a=t.indexOf(n.outerHTML)+1>=t.length?0:t.indexOf(n.outerHTML)+1),(s=photos[a].cloneNode(!0)).classList.add("j_expanded_photo"),changeExpanded.append(s),expandedPhoto().remove(),currentExpandedPhoto.innerText=a+1})}),expandClose.addEventListener("click",()=>{s(expandArea)&&(a(expandArea),a(expandedPhoto(),!0))}),expandArea.addEventListener("click",({target:e})=>{s(expandArea)&&(e.classList.contains("j_photo_expand_area")||e.classList.contains("actions"))&&(a(expandArea),a(expandedPhoto(),!0))}),expandArea.addEventListener("mousemove",()=>{expandActions.classList.contains("visible")||(window.clearTimeout(),expandActions.classList.add("visible"),setTimeout(()=>expandActions.classList.remove("visible"),3e3))}),installmentsButton.addEventListener("click",()=>{s(installments)||e(installments)}),installmentClose.addEventListener("click",()=>{s(installments)&&a(installments)}),installments.addEventListener("click",({target:e})=>{s(installments)&&e.classList.contains("j_installment_modal")&&a(installments)});let starsToRate=n(".j_star_rate");starsToRate.forEach((e,a,t)=>{e.addEventListener("mouseenter",()=>{e.classList.replace("fa-regular","fa-solid"),t.forEach((e,t)=>t<a&&e.classList.replace("fa-regular","fa-solid"))}),e.addEventListener("mouseleave",()=>{t.forEach(e=>e.classList.replace("fa-solid","fa-regular"))})});